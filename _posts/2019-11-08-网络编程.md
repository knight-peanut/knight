---
layout:     post
title:      Java网络编程
subtitle:   记录一些知识点，包括java.net包里的常用类
date:       2019-11-08
author:     LJJ
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - java
---


### 网络编程
简述：做的一些个人感觉容易忽视和比较重要的知识点，关于计算机网络方面会有单独的记录，不详细展开，这里只针对java中的网络编程基础部分。

##### 什么叫做URL

 - 在www上，每一信息资源都有统一且唯一的地址，该地址就叫URL(Uniform Resource Locator)，它是www的统一资源定位符。
 - URL由4部分组成：协议 、存放资源的主机域名、资源文件名和端口号。如果未指定该端口号，则使用协议默认的端口。
 - 例如http 协议的默认端口为 80。 在浏览器中访问网页时，地址栏显示的地址就是URL。
- 在java.net包中提供了URL类，该类封装了大量复杂的涉及从远程站点获取信息的细节。

#### Scoket
- 在应用层和传输层之间，使用套接Socket来进行分离。
-   Socket实际是传输层供给应用层的编程接口。
-   Socket编程可以开发客户机和服务器应用程序，可以在本地网络上进行通信，也可通过Internet在全球范围内通信。

![.](https://www.sxt.cn/360shop/Public/admin/UEditor/20170528/1495936842448637.png)

### java.net包中的常用类
 Java为了可移植性，不允许直接调用操作系统，而是由java.net包来提供网络功能。Java虚拟机负责提供与操作系统的实际连接。
 
 #### InetAddress
 - 作用：封装计算机的IP地址和DNS(没有端口信息)。
 - 这个类没有构造方法。如果要得到对象，只能通过静态方法：getLocalHost()、getByName()、 getAllByName()、 getAddress()、getHostName()。
 
#### InetSocketAddress
- 包含IP和端口信息，常用于Socket通信。此类实现 IP 套接字地址(IP 地址 + 端口号)，不依赖任何协议。


#### URL
- URL标识了计算机上的资源。
- 类 URL 代表一个统一资源定位符，它是指向互联网“资源”的指针。资源可以是简单的文件或目录，也可以是对更为复杂的对象的引用，例如对数据库或搜索引擎的查询。
- DK中提供了URL类，该类的全名是java.net.URL，有了这样一个类，就可以使用它的各种方法来对URL对象进行分割、合并等处理。

下面是URL类的使用方法：

    public class TestUrl {
    
    	public static void main(String[] args) throws MalformedURLException {
    	
    		URL url = new URL("https://www.google.com/imgres?imgurl=http%3A%2F%2Fpic.netbian.com%2Fuploads%2Fallimg%2F191006%2F005346-1570294426c666.jpg&imgrefurl=http%3A%2F%2Fpic.netbian.com%2F4kfengjing%2F&tbnid=nDH0bFXlObwFBM&vet=12ahUKEwjDsYG8pNrlAhWnHjQIHb7TCzgQMygAegUIARDcAQ..i&docid=HiLtAxuwJ1_OzM&w=450&h=287&q=%E9%A3%8E%E6%99%AF&hl=zh-CN&ved=2ahUKEwjDsYG8pNrlAhWnHjQIHb7TCzgQMygAegUIARDcAQ");
    		System.out.println("获取与此url默认关联的协议的默认端口："+url.getDefaultPort());
    		System.out.println("端口号后面的内容getFile:"+url.getFile());
    		System.out.println("主机名："+url.getHost());
    		System.out.println("路径："+url.getPath());
    		System.out.println("获取端口号:"+url.getPort());
    		System.out.println("获取协议："+url.getProtocol());
    		System.out.println("参数部分:"+url.getQuery());
    		System.out.println("锚点："+url.getRef());
    		
    		
    	}
    
    }

看控制台输出信息：

    获取与此url默认关联的协议的默认端口：443
    端口号后面的内容getFile:/imgres?imgurl=http%3A%2F%2Fpic.netbian.com%2Fuploads%2Fallimg%2F191006%2F005346-1570294426c666.jpg&imgrefurl=http%3A%2F%2Fpic.netbian.com%2F4kfengjing%2F&tbnid=nDH0bFXlObwFBM&vet=12ahUKEwjDsYG8pNrlAhWnHjQIHb7TCzgQMygAegUIARDcAQ..i&docid=HiLtAxuwJ1_OzM&w=450&h=287&q=%E9%A3%8E%E6%99%AF&hl=zh-CN&ved=2ahUKEwjDsYG8pNrlAhWnHjQIHb7TCzgQMygAegUIARDcAQ
    主机名：www.google.com
    路径：/imgres
    获取端口号:-1
    获取协议：https
    参数部分:imgurl=http%3A%2F%2Fpic.netbian.com%2Fuploads%2Fallimg%2F191006%2F005346-1570294426c666.jpg&imgrefurl=http%3A%2F%2Fpic.netbian.com%2F4kfengjing%2F&tbnid=nDH0bFXlObwFBM&vet=12ahUKEwjDsYG8pNrlAhWnHjQIHb7TCzgQMygAegUIARDcAQ..i&docid=HiLtAxuwJ1_OzM&w=450&h=287&q=%E9%A3%8E%E6%99%AF&hl=zh-CN&ved=2ahUKEwjDsYG8pNrlAhWnHjQIHb7TCzgQMygAegUIARDcAQ
    锚点：null

下面这个是获取百度url的一些东西，得到的是它的整个页面html信息：

    public class TestSpider {
    
    	public static void main(String[] args) {
    		basicSpider();
    	}
    
    	 static void basicSpider() {
    	        URL url = null;
    	        InputStream is = null;
    	        BufferedReader br = null;
    	        StringBuilder sb = new StringBuilder();
    	        String temp = "";
    	        try {
    	            url = new URL("http://www.baidu.com");
    	            is = url.openStream();
    	            br = new BufferedReader(new InputStreamReader(is));
    	            /* 
    	             * 这样就可以将网络内容下载到本地机器。
    	             * 然后进行数据分析，建立索引。这也是搜索引擎的第一步。
    	             */
    	            while ((temp = br.readLine()) != null) {
    	                sb.append(temp);
    	            }
    	            System.out.println(sb);
    	        } catch (MalformedURLException e) {
    	            e.printStackTrace();
    	        } catch (IOException e) {
    	            e.printStackTrace();
    	        } finally {
    	            try {
    	                br.close();
    	            } catch (IOException e) {
    	                e.printStackTrace();
    	            }
    	            try {
    	                is.close();
    	            } catch (IOException e) {
    	                e.printStackTrace();
    	            }
    	        }
    	    }
    	}

控制台输出：

    <!DOCTYPE html><!--STATUS OK--><html> <head><meta http-equiv=content-type content=text/html;charset=utf-8><meta http-equiv=X-UA-Compatible content=IE=Edge><meta content=always name=referrer><link rel=stylesheet type=text/css href=http://s1.bdstatic.com/r/www/cache/bdorz/baidu.min.css><title>鐧惧害涓?涓嬶紝浣犲氨鐭ラ亾</title></head> <body link=#0000cc> <div id=wrapper> <div id=head> <div class=head_wrapper> <div class=s_form> <div class=s_form_wrapper> <div id=lg> <img hidefocus=true src=//www.baidu.com/img/bd_logo1.png width=270 height=129> </div> <form id=form name=f action=//www.baidu.com/s class=fm> <input type=hidden name=bdorz_come value=1> <input type=hidden name=ie value=utf-8> <input type=hidden name=f value=8> <input type=hidden name=rsv_bp value=1> <input type=hidden name=rsv_idx value=1> <input type=hidden name=tn value=baidu><span class="bg s_ipt_wr"><input id=kw name=wd class=s_ipt value maxlength=255 autocomplete=off autofocus></span><span class="bg s_btn_wr"><input type=submit id=su value=鐧惧害涓?涓? class="bg s_btn"></span> </form> </div> </div> <div id=u1> <a href=http://news.baidu.com name=tj_trnews class=mnav>鏂伴椈</a> <a href=http://www.hao123.com name=tj_trhao123 class=mnav>hao123</a> <a href=http://map.baidu.com name=tj_trmap class=mnav>鍦板浘</a> <a href=http://v.baidu.com name=tj_trvideo class=mnav>瑙嗛</a> <a href=http://tieba.baidu.com name=tj_trtieba class=mnav>璐村惂</a> <noscript> <a href=http://www.baidu.com/bdorz/login.gif?login&amp;tpl=mn&amp;u=http%3A%2F%2Fwww.baidu.com%2f%3fbdorz_come%3d1 name=tj_login class=lb>鐧诲綍</a> </noscript> <script>document.write('<a href="http://www.baidu.com/bdorz/login.gif?login&tpl=mn&u='+ encodeURIComponent(window.location.href+ (window.location.search === "" ? "?" : "&")+ "bdorz_come=1")+ '" name="tj_login" class="lb">鐧诲綍</a>');</script> <a href=//www.baidu.com/more/ name=tj_briicon class=bri style="display: block;">鏇村浜у搧</a> </div> </div> </div> <div id=ftCon> <div id=ftConw> <p id=lh> <a href=http://home.baidu.com>鍏充簬鐧惧害</a> <a href=http://ir.baidu.com>About Baidu</a> </p> <p id=cp>&copy;2017&nbsp;Baidu&nbsp;<a href=http://www.baidu.com/duty/>浣跨敤鐧惧害鍓嶅繀璇?</a>&nbsp; <a href=http://jianyi.baidu.com/ class=cp-feedback>鎰忚鍙嶉</a>&nbsp;浜琁CP璇?030173鍙?&nbsp; <img src=//www.baidu.com/img/gs.gif> </p> </div> </div> </div> </body> </html>
    
    
    
